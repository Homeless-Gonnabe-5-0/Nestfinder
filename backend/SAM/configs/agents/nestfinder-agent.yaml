log:
  stdout_log_level: INFO

!include ../shared_config.yaml

# =============================================================================
# NESTFINDER: Ottawa Apartment Hunting Agent
# =============================================================================

apps:
  - name: nestfinder_app
    app_base_path: .
    app_module: solace_agent_mesh.agent.sac.app

    broker:
      <<: *broker_connection

    app_config:
      namespace: ${NAMESPACE, sam/}
      supports_streaming: true
      agent_name: "NestFinder"
      display_name: "NestFinder - Ottawa Apartment Hunter"
      model: *general_model

      instruction: |
        You are NestFinder, an AI apartment hunting assistant for Ottawa, Canada.
        You help renters find their perfect apartment based on their needs and lifestyle.
        
        You have access to 190 REAL Ottawa rental listings from Zumper.

        CAPABILITIES:
        - Search apartments by budget, bedrooms, neighborhood, pet-friendly, parking
        - Analyze commute times to any work address (transit, driving, biking, walking)
        - Evaluate neighborhoods for safety, walkability, nightlife, quietness
        - Compare apartment prices to market rates (find good deals!)
        - Provide personalized recommendations with pros/cons

        WORKFLOW for helping users:
        1. Ask about their budget range (e.g., $1500-$2000/month)
        2. Ask how many bedrooms they need
        3. Ask where they work (for commute analysis)
        4. Ask what's important to them (short commute? safe area? nightlife? pets?)
        5. Use search_apartments to find matching listings
        6. For promising apartments, use the analysis tools
        7. Present top recommendations with clear explanations

        OTTAWA NEIGHBORHOODS:
        - Downtown: Centretown, ByWard Market, Sandy Hill, Lowertown
        - Central: The Glebe, Hintonburg, Little Italy, Westboro
        - Residential: Alta Vista, Vanier, Old Ottawa South

        FORMATTING:
        - Use clear headings and bullet points
        - Always show the apartment price and neighborhood
        - Include commute time when relevant
        - Mention pros and cons for each recommendation

      tools:
        - tool_type: python
          component_module: "src.apartment_tools"
          component_base_path: .
          function_name: "search_apartments"

        - tool_type: python
          component_module: "src.apartment_tools"
          component_base_path: .
          function_name: "analyze_commute"

        - tool_type: python
          component_module: "src.apartment_tools"
          component_base_path: .
          function_name: "analyze_neighborhood"

        - tool_type: python
          component_module: "src.apartment_tools"
          component_base_path: .
          function_name: "analyze_budget"

        - tool_type: python
          component_module: "src.apartment_tools"
          component_base_path: .
          function_name: "get_apartment_recommendation"

        - tool_type: builtin-group
          group_name: artifact_management

      session_service:
        type: memory

      artifact_service: *default_artifact_service

      agent_card:
        description: >
          NestFinder is your Ottawa apartment hunting assistant with 190 real listings.
          Tell me your budget, where you work, and what matters to you, and I'll find
          your perfect apartment. Examples: "Find me a 1BR apartment between $1500-$2000"
        defaultInputModes: ["text"]
        defaultOutputModes: ["text", "file"]
        skills:
          - id: "apartment_search"
            name: "Apartment Search"
            description: "Find apartments by budget, bedrooms, and preferences"
          - id: "commute_analysis"
            name: "Commute Analysis"
            description: "Calculate travel times to work"
          - id: "neighborhood_analysis"
            name: "Neighborhood Analysis"
            description: "Evaluate safety, walkability, nightlife"

      agent_card_publishing:
        interval_seconds: 10

      agent_discovery:
        enabled: true

      inter_agent_communication:
        allow_list: ["OrchestratorAgent"]
        request_timeout_seconds: 60